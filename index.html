<!DOCTYPE html>
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title></title>
  
  <link rel="stylesheet" href="reveal/css/reveal.min.css">
  <link rel="stylesheet" href="reveal/lib/css/googlecode.css">

  <link rel="stylesheet" href="src/slides-theme/style.css">
  <link rel="stylesheet" href="src/slides-theme/talk-specific.css">

  <!-- demos -->

  <!-- for live coding -->
  <link rel="stylesheet" href="src/js/little-console.css" id="theme">

  <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-24335480-1']);
  _gaq.push(['_trackPageview']);

  var asyncScript = function(src) {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = src;
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  };

  asyncScript(('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js');
  </script>

  <script src="src/js/revealHooks.js"></script>

</head>

<body>

  <div class="reveal">
    <div class="slides">
<section data-state=title  class=""><h2 id="typescript">TypeScript</h2>
<aside class=notes>
Today talk tech. But also, how 1 of biggest anti-open-source voice in history,
</aside>

</section>

<section   class="notitle"><h2 id="msft">MSFT</h2>
<p><img src="src/img/communism.jpg" alt="comm"></p>
<aside class=notes>
Shipped a massively successful addition to the JS ecosystem.

How big?
</aside>

</section>

<section   class="notitle"><h2 id="success">Success</h2>
<p><img src="src/img/growth.png" alt="growth"></p>
</section>

<section   class="notitle"><h2 id="success-2">Success 2</h2>
<blockquote>
<p>traffic to TypeScript questions grew ... enough that we left it off to avoid overwhelming the rest of the scale. </p>
</blockquote>
<p><img src="src/img/growth-b.png" alt="growth"></p>
<aside class=notes>
Even though it went against everything the community stood for
</aside>

</section>

<section   class="notitle"><h2 id="-which-was-against-all-the-the-js-community-stood-for">...which was against all the the JS community stood for</h2>
<p><img src="src/img/nobody.png" alt="img"></p>
</section>

<section data-state=title  class=""><h2 id="prologue">Prologue</h2>
</section>

<section   class=""><h2 id="js-is-a-dynamic-language">JS is a &#39;dynamic&#39; language</h2>
</section>

<section   class=""><h2 id="static-vs-dynamic">Static vs dynamic</h2>
</section>

<section   class="notitle"><h2 id="static-vs-dynamic">Static vs dynamic</h2>
<p><img src="src/img/tab-spaces.jpg" alt="tab sp"></p>
</section>

<section   class="notitle"><h2 id="self-image">Self-image</h2>
<p><img src="src/img/self-image.png" alt="mac-pc"></p>
</section>

<section   class="q-basic"><h2 id="q-basic">Q-Basic</h2>
<pre><code>10 PRINT &quot;Tim is cool&quot;
20 GOTO 10
</code></pre><aside class=notes>
I started out with dynamic
</aside>

</section>

<section   class="notitle"><h2 id="html-css-js">HTML + CSS + JS</h2>
<p><img src="src/img/24-hours.jpg" alt="24-hours"></p>
</section>

<section   class=""><h2 id="js">JS</h2>
<pre><code class="lang-html">&lt;img onmouseover=&#39;rollover()&#39;
     src=&#39;/dancing-hamster.gif&#39;
     alt=&#39;A cool dancing hamster&#39; /&gt;
</code></pre>
</section>

<section   class=""><h2 id="it-was-wonderful-then-">It was wonderful, then...</h2>
</section>

<section   class=""><h2 id="horror">Horror</h2>
</section>

<section   class="notitle"><h2 id="c-">C++</h2>
<p><img src="src/img/cpp.png" alt="c++"></p>
</section>

<section   class="notitle"><h2 id="c-">C++</h2>
<p><img src="src/img/win.png" alt="win+"></p>
</section>

<section   class="notitle"><h2 id="java">Java</h2>
<p><img src="src/img/ugly.png" alt="ugly"></p>
</section>

<section   class="notitle"><h2 id="ruby">Ruby</h2>
<p><img src="src/img/picklive_homepage.png" alt="picklive"></p>
</section>

<section   class="notitle"><h2 id="_why">_why</h2>
<p><img src="src/img/why.png" alt="why"></p>
<aside class=notes>
A community who valued creativity, and didn&#39;t even WANT types
</aside>

</section>

<section   class="notitle"><h2 id="boring">Boring</h2>
<p><img src="src/img/yawn.jpg" alt="boring"></p>
</section>

<section   class="notitle"><h2 id="as3">AS3</h2>
<p><img src="src/img/as3.jpg" alt="as3"></p>
<aside class=notes>
My exposure was to unsuccessful typed languages

Since then...
</aside>

</section>

<section   class=""><h2 id="many-have-tried-to-kill-js">Many have tried to kill JS</h2>
</section>

<section   class=""><h2 id="js-started-ugly">JS started ugly</h2>
<blockquote>
<p>JS had to &quot;look like Java&quot; only less so, be Java&#39;s dumb kid brother or boy-hostage sidekick.</p>
<p>Plus, I had to be done in ten days or something worse than JS would have happened.</p>
</blockquote>
</section>

<section   class=""><h2 id="but-people-loved-it">But people loved it</h2>
<blockquote>
<p>Any application that can be written in JavaScript, will eventually be written in JavaScript</p>
</blockquote>
<p>Jeff Atwood</p>
</section>

<section   class=""><h2 id="so-all-have-failed">So all have failed</h2>
<p><aside class=notes>
So with this background, it&#39;s a hard pitch.</p>
<p>And microsoft was the MOST unlikely of all
</aside></p>
</section>

<section   class="notitle"><h2 id="coming-for-oss">Coming for OSS</h2>
<p><img src="src/img/embrace-extend.png" alt="extend"></p>
</section>

<section data-state=title  class=""><h2 id="microsoft-oss-">Microsoft &amp; OSS?!</h2>
</section>

<section   class="notitle"><h2 id="linux-is-">Linux is ...?</h2>
<p><img src="src/img/ballmer.jpg" alt="ballmer"></p>
</section>

<section   class="notitle"><h2 id="war">War</h2>
<p><img src="src/img/bug-number-one.png" alt="war"></p>
</section>

<section   class="notitle"><h2 id="runs-deep">Runs deep</h2>
<p><img src="src/img/do-not-hire.png" alt="deep"></p>
</section>

<section data-state=title  class=""><h2 id="we-ve-met-the-characters">We&#39;ve met the characters</h2>
</section>

<section   class=""><h2 id="the-most-popular-language-in-the-world">The most popular language in the world</h2>
</section>

<section   class=""><h2 id="the-villain-of-oss">The villain of OSS</h2>
</section>

<section   class=""><h2 id="october-1st-2012">October 1st 2012</h2>
</section>

<section   class="notitle"><h2 id="a-msft-legend-released-a-new-project">A MSFT legend released a new project</h2>
<p><img src="src/img/anders.jpg" alt="img"></p>
</section>

<section   class=""><h2 id="-"> </h2>
<p><img src="src/img/trojan.jpg" alt="img"></p>
</section>

<section   class=""><h2 id="-"> </h2>
<p><img src="src/img/ugly.png" alt="img"></p>
</section>

<section   class="notitle"><h2 id="the-js-community-acts-">The JS community acts...</h2>
<p><img src="src/img/nobody.png" alt="img"></p>
</section>

<section   class="notitle"><h2 id="insightful-">Insightful...</h2>
<p><img src="src/img/illusion.png" alt="img"></p>
</section>

<section   class="notitle"><h2 id="polite-">Polite...</h2>
<p><img src="src/img/js-already.png" alt="img"></p>
</section>

<section   class="notitle"><h2 id="but-incredibly">But... incredibly</h2>
<p><img src="src/img/like-it.png" alt="img"></p>
</section>

<section   class=""><h2 id="why-">Why?</h2>
</section>

<section data-state=title  class=""><h2 id="the-language">The language</h2>
</section>

<section   class=""><h2 id="extending">Extending</h2>
</section>

<section   class=""><h2 id="a-superset-of-modern-js">A superset of modern JS</h2>
<p><img src="src/img/superset.png" alt="img"></p>
</section>

<section   class=""><h2 id="js-today">JS today</h2>
<pre><code class="lang-javascript">class Queue {
  async flush() {
    let item;
    while(item = await this.next()) {
      this.act(item, ({ id }) =&gt; {
        console.log(`${id} done`);
      });
    }
  }
}
</code></pre>
</section>

<section   class=""><h2 id="some-js">Some JS</h2>
<pre><code class="lang-javascript">function getHostname(url) {
  const a = document.createElement(&quot;a&quot;);
  a.href = url;
  return a.hostname;
}
</code></pre>
</section>

<section   class=""><h2 id="some-ts">Some TS</h2>
<pre><code class="lang-javascript">function getHostname(url: string): string {
  const a: HTMLAnchorElement =
     document.createElement(&quot;a&quot;);
  a.href = url;
  return a.hostname;
}
</code></pre>
</section>

<section   class=""><h2 id="types-">Types!</h2>
<pre><code class="lang-javascript">function...(url: string): string ...
  const a: HTMLAnchorElement ...
  // ...
}
</code></pre>
</section>

<section   class=""><h2 id="where-do-you-want-the-bugs-to-show-up-">Where do you want the bugs to show up?</h2>
</section>

<section   class=""><h2 id="without-types">Without types</h2>
<pre><code class="lang-javascript">const parent = el.parentElement;
parent.setAttribute(&quot;src&quot;, imageLocation);
</code></pre>
</section>

<section   class="notitle"><h2 id="boom">boom</h2>
<pre><code class="lang-javascript">const parent = el.parentElement;

// Error: Cannot read property 
//    &#39;setAttribute&#39; of undefined
parent.setAttribute(&quot;src&quot;, imageLocation);
</code></pre>
</section>

<section   class=""><h2 id="vs-">VS...</h2>
<pre><code class="lang-javascript">const parent = el.parentElement;
// object is possibly null
parent.setAttribute(&quot;src&quot;, imageLocation);
</code></pre>
</section>

<section   class=""><h2 id="typescript-feels-familiar">TypeScript feels familiar</h2>
</section>

<section   class=""><h2 id="e-g-vs-coffeescript">e.g vs Coffeescript</h2>
<pre><code class="lang-coffeescript">getHostname = (url) =&gt;
  a = document.createElement &quot;a&quot;
  a.href = url
  a.hostname
</code></pre>
</section>

<section   class=""><h2 id="especially-when-compiled">Especially when compiled</h2>
<pre><code class="lang-sh">tsc example.ts
</code></pre>
<pre><code class="lang-javascript">function getHostname(url) {
  const a = document.createElement(&quot;a&quot;);
  a.href = url;
  return a.hostname;
}
</code></pre>
</section>

<section   class=""><h2 id="vs-">Vs...</h2>
<pre><code class="lang-haskell">main :: Eff (dom :: DOM) Unit
main =
    render $ fold
      [ h1 (text &quot;Try PureScript!&quot;)
      ]
</code></pre>
<pre><code class="lang-javascript">// ...
var main = render(fold(Data_Foldable.foldableArray)
    (monoidDoc)([h1(text(
        &quot;Try PureScript!&quot;))]));
</code></pre>
</section>

<section   class=""><h2 id="same-runtime-semantics">Same runtime semantics</h2>
<ul>
<li>i.e, not PureScript (Haskell-ish)</li>
</ul>
</section>

<section   class=""><h2 id="and-of-course-same-platform-apis">And, of course, same platform APIs</h2>
</section>

<section   class=""><h2 id="and-same-vms">And same VMs</h2>
</section>

<section   class=""><h2 id="so-js-with-types">So... JS with types</h2>
</section>

<section   class=""><h2 id="highlights">Highlights</h2>
<ul>
<li>inference</li>
<li>structural typing</li>
<li>generics</li>
<li>type unions</li>
<li>mapped types</li>
</ul>
</section>

<section   class="notitle"><h2 id="it-s-not-dumb">It&#39;s not dumb</h2>
<p><img src="src/img/static-types.jpg" alt="dumb"></p>
</section>

<section   class=""><h2 id="inference">Inference</h2>
<pre><code class="lang-java">// Java gave static types a bad name
String message = &quot;hi&quot;;
</code></pre>
<pre><code class="lang-typescript">// clear that message is a string
let message = &quot;hi&quot;;
const double = (x: number) =&gt; x * 2;

double(message);
</code></pre>
</section>

<section   class=""><h2 id="advanced-inference">Advanced inference</h2>
<pre><code class="lang-typescript">// infers return type: Element | undefined
function getOffset(node: Element) {
  if (node instanceof HTMLElement) {
    // control-flow analysis:
    // clear this is a HTMLElement,
    // rather than a plain Element
    return node.offsetParent;
  }
}
</code></pre>
</section>

<section   class=""><h2 id="embraces-dynamic-idioms">Embraces dynamic idioms</h2>
</section>

<section   class="notitle"><h2 id="e-g">e.g</h2>
<pre><code class="lang-javascript">// we know this is a list of names, 
// string[], but can TypeScript?
const names = _.pick([
  {name: &quot;c#&quot;}, 
  {name: &quot;f#&quot;},
  {name: &quot;d&quot;}
], &quot;name&quot;);
</code></pre>
</section>

<section   class=""><h2 id="can-be-typed">Can be typed</h2>
<pre><code class="lang-javascript">// mapped types
type Pick&lt;Type, Key extends keyof Type&gt; = {
    [Property in Key]: Type[Property];
}

function pick&lt;
  Type, 
  Key extends keyof Type
&gt;(obj: Type, ...keys: Key[]): Pick&lt;Type, Key&gt;;
</code></pre>
</section>

<section   class=""><h2 id="tagged-unions">Tagged unions</h2>
</section>

<section   class="notitle"><h2 id="tagged-unions">Tagged unions</h2>
<pre><code class="lang-typescript">interface Sms {
  kind: &#39;sms&#39;;
  number: string;
}
interface Email {
  kind: &#39;email&#39;;
  address: string;
}

type Destination = Sms | Email;
</code></pre>
</section>

<section   class="notitle"><h2 id="unions">Unions</h2>
<pre><code class="lang-javascript">function formatRecipient(dest: Destination) {
  switch(dest.kind) {
    case &#39;sms&#39;:
      return `Via text message to ${dest.number}`;
    case &#39;email&#39;:
      return `Via email to ${dest.address}`;
  }
}
</code></pre>
</section>

<section   class=""><h2 id="safe-">Safe?</h2>
<pre><code class="lang-javascript">function formatRecipient(dest: Destination) {
  switch(dest.kind) {
    case &#39;sms&#39;:
      return `Via text message to ${dest.number}`;
  }
}
</code></pre>
</section>

<section   class=""><h2 id="exhaustiveness-checking">Exhaustiveness checking</h2>
<pre><code class="lang-javascript">// error: not all code paths return a value
function formatRecipient(dest: Destination) {
  switch(dest.kind) {
    case &#39;sms&#39;:
      return `Via text message to ${dest.number}`;
  }
}
</code></pre>
</section>

<section   class=""><h2 id="niceties">Niceties</h2>
</section>

<section   class=""><h2 id="property-handling">Property handling</h2>
</section>

<section   class="notitle"><h2 id="property-handling">Property handling</h2>
<pre><code class="lang-javascript">// immutable record type
class PhoneNumber {
  readonly kind: &#39;phoneNumber&#39;

  constructor(
    readonly country: number,
    readonly area: number,
    readonly number: number,
  ) {}
}
</code></pre>
</section>

<section   class=""><h2 id="structual-typing">Structual typing</h2>
</section>

<section   class="notitle"><h2 id="structual-typing">Structual typing</h2>
<pre><code class="lang-javascript">// structual typing, classes as interfaces
const number: PhoneNumber = {
  country: 44,
  code: 1225,
  number: 733221,
};
</code></pre>
</section>

<section data-state=title  class=""><h2 id="ts-js">TS + JS</h2>
</section>

<section   class=""><h2 id="instant-gratification">Instant gratification</h2>
</section>

<section   class=""><h2 id="ecosystem-intelligence">Ecosystem intelligence</h2>
<p><img src="src/img/npm.png" alt="npm"></p>
</section>

<section   class=""><h2 id="types">Types</h2>
<pre><code class="lang-sh">npm install express @types/express
</code></pre>
</section>

<section   class=""><h2 id="gradual-typing">Gradual typing</h2>
<pre><code class="lang-javascript">// options: allowJs + checkJs

// will use @types/express automatically
import express from &quot;express&quot;;

// will be typechecked
import { someExport } from &quot;./some/js/file&quot;;
</code></pre>
</section>

<section   class=""><h2 id="e-g-mirage">e.g Mirage</h2>
</section>

<section   class=""><h2 id="safe-refactoring">Safe refactoring</h2>
<pre><code class="lang-javascript">// object {} has no property &#39;length&#39;
this.sizeQueue = iter.map(this.map, queueItem);
</code></pre>
</section>

<section   class=""><h2 id="picked-up-edge-cases">Picked up edge-cases</h2>
<pre><code class="lang-javascript">// mirage.js(114,11): error TS2554: Expected 
// 0-1 arguments, but got 2.
throw Error(&#39;Invalid redef &quot;&#39; + property + &#39;&quot;.&#39;
  , e.message);
</code></pre>
</section>

<section   class=""><h2 id="-and-forced-maintainability">...and forced maintainability</h2>
</section>

<section   class="notitle"><h2 id="-and-forced-maintainability">...and forced maintainability</h2>
<pre><code>mirage.js(1907,16): error TS2532: Object
   is possibly &#39;undefined&#39;.

mirage.js(1612,15): error TS2339: Property &#39;proxy&#39; 
  does not exist on type &#39;{ image: 

lib/config.js(1,25): error TS2339: Property &#39;mirage2&#39; 
  does not exist on type &#39;Window&#39;.

lib/path.js(35,45): error TS2339: Property &#39;webkitURL&#39;
   does not exist on type &#39;Window&#39;.

mirage.js(2215,20): error TS8024: JSDoc &#39;@param&#39;
   tag has name &#39;The&#39;, but there 
  is no parameter with that name.
</code></pre></section>

<section data-state=title  class=""><h2 id="why-was-ts-the-winner-">Why was TS the winner?</h2>
</section>

<section   class=""><h2 id="worse-is-better-">Worse is better?</h2>
<p><img src="src/img/gabriel.jpg" alt="img"></p>
</section>

<section   class=""><h2 id="criteria">Criteria</h2>
<ol>
<li>Simplicity</li>
<li>Correctness</li>
<li>Consistency</li>
<li>Completeness</li>
</ol>
</section>

<section   class=""><h2 id="simplicitly">Simplicitly</h2>
</section>

<section   class=""><h2 id="correct">Correct</h2>
<blockquote>
<p>Slightly better to be simple than correct</p>
</blockquote>
</section>

<section   class=""><h2 id="consistency">Consistency</h2>
</section>

<section   class=""><h2 id="completeness">Completeness</h2>
<blockquote>
<p>can be sacrificed in favor of any other quality</p>
</blockquote>
<ul>
<li>Shipped without generics</li>
</ul>
</section>

<section   class=""><h2 id="further">Further</h2>
</section>

<section   class=""><h2 id="not-greedy-">Not greedy!</h2>
</section>

<section   class=""><h2 id="didn-t-see-js-as-a-problem-to-be-fixed">Didn&#39;t see JS as a problem to be fixed</h2>
</section>

<section   class=""><h2 id="and-">And...</h2>
<p><img src="src/img/lead_bullets.png" alt="img"></p>
</section>

</div>
</div>

<!-- demo code -->


<!-- demos -->

<!-- live coding -->
<script src=src/js/little-console.js></script>
<script src=src/js/showConsoles.js></script>

<!-- reveal -->
<script src="reveal/lib/js/head.min.js"></script>
<script src="reveal/plugin/highlight/highlight.js"></script>
<script src="reveal/js/reveal.js"></script>
<script src="src/js/revealConfig.js"></script>

</body>
